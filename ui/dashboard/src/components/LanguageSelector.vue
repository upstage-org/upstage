<template>
  <div class="locale-changer my-2">
    <Dropdown v-model="$i18n.locale" :data="$i18n.availableLocales"
      :renderLabel="locale => `${flags[locale] ?? 'ðŸ³ï¸â€ðŸŒˆ'} ${labels[locale] ?? locale}`"
      @update:modelValue="persistLocale" />
  </div>
</template>

<script setup>
import Dropdown from './form/Dropdown.vue';
const flags = {
  en: 'ðŸ‡ºðŸ‡¸',
  de: 'ðŸ‡©ðŸ‡ª',
  vn: 'ðŸ‡»ðŸ‡³',
}
const labels = {
  en: 'English',
  de: 'Deutsch',
  vn: 'Tiáº¿ng Viá»‡t',
}
const persistLocale = (locale) => {
  localStorage.setItem('locale', locale);
}
</script>