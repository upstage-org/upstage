<template>
  <div class="locale-changer m-2">
    <Dropdown v-model="$i18n.locale" :data="$i18n.availableLocales"
      :renderLabel="locale => `${flags[locale] ?? 'ğŸ³ï¸â€ğŸŒˆ'} ${labels[locale] ?? locale}`"
      @update:modelValue="persistLocale">
      <template #selected="{ item }">{{ flags[item] ?? 'ğŸ³ï¸â€ğŸŒˆ' }} <span class="is-hidden-mobile">{{ labels[item] ??
          item
      }}</span></template>
    </Dropdown>
  </div>
</template>

<script setup>
import Dropdown from './form/Dropdown.vue';
const flags = {
  en: 'ğŸ‡ºğŸ‡¸',
  de: 'ğŸ‡©ğŸ‡ª',
  vn: 'ğŸ‡»ğŸ‡³',
}
const labels = {
  en: 'English',
  de: 'Deutsch',
  vn: 'Tiáº¿ng Viá»‡t',
}
const persistLocale = (locale) => {
  localStorage.setItem('locale', locale);
}
</script>